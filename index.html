<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Med & Beauty | Expertos en Medicina Estética</title>
    <link rel="icon" href="/products/medAndBeautyLogo.png" type="image/x-icon">
    <script src="/config.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: {
                            DEFAULT: '#c5a560',
                            light: '#e6d0a0',
                            hover: '#b08d45'
                        },
                        dark: {
                            DEFAULT: '#111111',
                            light: '#2a2a2a'
                        },
                        cream: '#faf9f6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif']
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 1s ease-out forwards',
                        'scroll': 'scroll 60s linear infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        scroll: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(calc(-150px * 14))' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #faf9f6; }
        h1, h2, h3, h4 { font-family: 'Playfair Display', serif; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c5a560; border-radius: 3px; }

        /* Floating Chat */
        .chat-widget-enter { opacity: 0; transform: translateY(20px) scale(0.95); pointer-events: none; }
        .chat-widget-active { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }

        /* Video Overlay Gradient */
        .video-overlay {
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.6));
        }
    </style>
</head>
<body class="antialiased text-dark-light">

<!-- Preloader -->
<div id="preloader" class="fixed inset-0 bg-white z-[9999] flex flex-col items-center justify-center transition-opacity duration-700">
    <div class="text-4xl font-serif text-dark font-bold mb-4 tracking-widest">MB</div>
    <div class="w-24 h-[1px] bg-gray-200 overflow-hidden relative">
        <div class="absolute inset-y-0 left-0 bg-gold w-full animate-[spin_1.5s_linear_infinite] origin-left" style="animation: loading-bar 1.5s ease-in-out infinite;"></div>
    </div>
    <style>@keyframes loading-bar { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }</style>
</div>

<!-- Header -->
<header id="main-header" class="fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md border-b border-white/10 transition-all duration-300 shadow-sm">
    <nav class="container mx-auto px-6 h-20 flex justify-between items-center">
        <!-- Logo -->
        <a href="#" class="flex items-center gap-3 group">
            <!-- Simulación de Logo (puedes reemplazar con tu img) -->
            <div class="h-10 w-10 bg-dark text-gold flex items-center justify-center font-serif font-bold text-xl rounded-sm">MB</div>
            <div class="flex flex-col">
                <span class="font-serif text-xl font-bold leading-none text-dark group-hover:text-gold transition-colors">Med & Beauty</span>
                <span class="text-[0.6rem] uppercase tracking-[0.2em] text-gray-500">Professional Supply</span>
            </div>
        </a>

        <!-- Desktop Nav -->
        <div class="hidden md:flex items-center gap-10 text-xs uppercase tracking-[0.2em] font-medium text-dark">
            <a href="#" class="hover:text-gold transition-colors">Inicio</a>
            <a href="#catalogo" class="hover:text-gold transition-colors">Colección</a>
            <a href="#marcas" class="hover:text-gold transition-colors">Marcas</a>
        </div>

        <!-- Icons -->
        <div class="flex items-center gap-6">
            <a href="/catalog.html" class="text-dark hover:text-gold transition-colors"><i class="fa-regular fa-user text-lg"></i></a>
        </div>
    </nav>
</header>

<main>
    <!-- HERO SECTION: VIDEO BACKGROUND -->
    <section class="relative h-screen min-h-[600px] w-full flex items-center justify-center overflow-hidden">

        <!-- 1. El Video de Fondo -->
        <!-- POSTER: Imagen de mujer madura estética por si el video falla -->
        <video
                autoplay
                muted
                loop
                playsinline
                poster="https://images.unsplash.com/photo-1551843073-4a9a5b6fcd5f?q=80&w=2070&auto=format&fit=crop"
                class="absolute inset-0 w-full h-full object-cover z-0"
        >
            <!-- Opción 1: Procedimiento Estético (Inyección/Filler) - Prioridad -->
            <source src="https://assets.mixkit.co/videos/preview/mixkit-cosmetic-injection-procedure-close-up-4007-large.mp4" type="video/mp4">

            <!-- Opción 2: Mujer tocándose el rostro (Estilo Spa/Cuidado) - Descomentar si prefieres este -->
            <!-- <source src="https://assets.mixkit.co/videos/preview/mixkit-woman-touching-her-face-gently-3965-large.mp4" type="video/mp4"> -->

            Tu navegador no soporta videos HTML5.
        </video>

        <!-- 2. Overlay (Capa oscura para contraste) -->
        <div class="absolute inset-0 bg-black/50 z-10"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent z-10"></div>

        <!-- 3. Contenido Central -->
        <div class="relative z-20 container mx-auto px-6 text-center text-white mt-20">

            <div class="animate-fade-in-up space-y-6">
                <!-- Tagline superior -->
                <div class="inline-flex items-center gap-4 justify-center mb-4">
                    <span class="h-[1px] w-8 bg-gold"></span>
                    <span class="text-gold uppercase tracking-[0.3em] text-xs font-bold">Exclusive for Professionals</span>
                    <span class="h-[1px] w-8 bg-gold"></span>
                </div>

                <!-- Título Gigante -->
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-serif font-medium leading-tight mb-6 drop-shadow-lg">
                    La ciencia de la <br>
                    <span class="italic text-gold-light">belleza eterna.</span>
                </h1>

                <!-- Subtítulo -->
                <p class="text-gray-200 text-lg md:text-xl font-light max-w-2xl mx-auto leading-relaxed mb-10 drop-shadow-md">
                    Distribución certificada de rellenos dérmicos, toxinas y bioestimuladores de clase mundial.
                </p>

                <!-- Barra de búsqueda Estilo SkinArmy/Navaja -->
                <div class="max-w-xl mx-auto bg-white/10 backdrop-blur-md border border-white/30 rounded-full p-2 flex items-center shadow-2xl transition-all hover:bg-white/20">
                    <input type="text" placeholder="¿Qué medicamento estás buscando?" class="flex-1 bg-transparent border-none outline-none text-white placeholder-gray-300 px-6 py-3 font-light">
                    <button class="bg-gold hover:bg-gold-hover text-white w-12 h-12 rounded-full flex items-center justify-center transition-all shadow-lg transform hover:scale-105">
                        <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>

                <!-- Botones adicionales -->
                <div class="pt-8 flex justify-center gap-6 text-xs uppercase tracking-widest font-semibold">
                    <a href="#catalogo" class="hover:text-gold transition-colors border-b border-transparent hover:border-gold pb-1">Ver Catálogo</a>
                    <a href="#marcas" class="hover:text-gold transition-colors border-b border-transparent hover:border-gold pb-1">Nuestras Marcas</a>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-20 animate-bounce text-white/70">
            <i class="fa-solid fa-chevron-down text-xl"></i>
        </div>
    </section>

    <!-- Brands Ticker -->
    <section id="marcas" class="py-10 bg-white border-b border-gray-100 overflow-hidden relative z-20">
        <div class="brands-wrapper relative flex w-full">
            <div class="brands-track flex items-center gap-20 px-4" id="brands-track">
                <!-- JS will populate -->
            </div>
            <!-- Fade edges -->
            <div class="absolute top-0 left-0 h-full w-32 bg-gradient-to-r from-white to-transparent z-10"></div>
            <div class="absolute top-0 right-0 h-full w-32 bg-gradient-to-l from-white to-transparent z-10"></div>
        </div>
    </section>

    <!-- Catalog Section -->
    <section id="catalogo" class="py-24 bg-cream relative">
        <div class="container mx-auto px-6">
            <!-- Section Header -->
            <div class="text-center max-w-3xl mx-auto mb-16">
                <span class="text-gold uppercase tracking-widest text-xs font-bold mb-3 block">Selección Premium</span>
                <h2 class="text-4xl md:text-5xl text-dark mb-6">Nuestra Colección</h2>
                <p class="text-gray-500 font-light">Explora productos cuidadosamente seleccionados para resultados estéticos superiores.</p>
            </div>

            <!-- Filters -->
            <div class="flex justify-center mb-12 flex-wrap gap-6 text-sm uppercase tracking-wider text-gray-400 font-medium">
                <button class="filter-btn text-dark border-b-2 border-gold pb-1" data-filter="todos">Todo</button>
                <div class="relative group">
                    <button class="hover:text-gold transition-colors flex items-center gap-1">
                        Marca <i class="fa-solid fa-chevron-down text-[10px]"></i>
                    </button>
                    <div class="absolute left-1/2 -translate-x-1/2 top-full mt-2 w-48 bg-white shadow-xl p-2 rounded-sm hidden group-hover:block z-20 border border-gray-100">
                        <select id="brand-filter" class="w-full p-2 text-gray-600 bg-transparent outline-none cursor-pointer">
                            <option value="todos">Todas las marcas</option>
                        </select>
                    </div>
                </div>
                <select id="sort-by" class="bg-transparent hover:text-gold transition-colors cursor-pointer outline-none">
                    <option value="relevancia">Relevancia</option>
                    <option value="precio_asc">Precio: Bajo - Alto</option>
                    <option value="precio_desc">Precio: Alto - Bajo</option>
                </select>
            </div>

            <!-- Product Grid -->
            <div id="product-grid" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-x-8 gap-y-12">
                <!-- Loader -->
                <div class="col-span-full flex flex-col items-center py-20 text-gray-300">
                    <div class="w-12 h-12 border-2 border-gray-200 border-t-gold rounded-full animate-spin mb-4"></div>
                    <span class="font-serif text-gray-400 italic">Cargando catálogo...</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Banner -->
    <section class="bg-dark text-white py-20">
        <div class="container mx-auto px-6 grid md:grid-cols-3 gap-12 text-center divide-y md:divide-y-0 md:divide-x divide-gray-800">
            <div class="px-6">
                <i class="fa-solid fa-gem text-3xl text-gold mb-6"></i>
                <h3 class="text-xl mb-3 font-serif">Calidad Certificada</h3>
                <p class="text-gray-400 text-sm font-light leading-relaxed">Todos nuestros productos cuentan con registro sanitario y garantía de origen.</p>
            </div>
            <div class="px-6 pt-8 md:pt-0">
                <i class="fa-solid fa-temperature-arrow-down text-3xl text-gold mb-6"></i>
                <h3 class="text-xl mb-3 font-serif">Cadena de Frío</h3>
                <p class="text-gray-400 text-sm font-light leading-relaxed">Empaque especializado y monitoreo de temperatura para toxinas.</p>
            </div>
            <div class="px-6 pt-8 md:pt-0">
                <i class="fa-solid fa-shield-halved text-3xl text-gold mb-6"></i>
                <h3 class="text-xl mb-3 font-serif">Compra Segura</h3>
                <p class="text-gray-400 text-sm font-light leading-relaxed">Procesamiento de pagos encriptado y facturación inmediata.</p>
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<footer id="footer" class="bg-white pt-20 pb-10 border-t border-gray-100">
    <div class="container mx-auto px-6">
        <div class="grid md:grid-cols-12 gap-12 mb-16">
            <div class="md:col-span-4 space-y-6">
                <div class="flex flex-col">
                    <span class="font-serif text-2xl font-bold text-dark">Med & Beauty</span>
                </div>
                <p class="text-gray-500 font-light leading-relaxed text-sm">
                    Redefiniendo el estándar en suministros médicos estéticos. <br>
                    Compromiso con la excelencia y el servicio al profesional.
                </p>
                <div class="flex gap-4">
                    <a href="#" class="w-10 h-10 border border-gray-200 flex items-center justify-center text-gray-400 hover:bg-dark hover:text-white hover:border-dark transition-all rounded-full"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="w-10 h-10 border border-gray-200 flex items-center justify-center text-gray-400 hover:bg-dark hover:text-white hover:border-dark transition-all rounded-full"><i class="fa-brands fa-facebook-f"></i></a>
                </div>
            </div>
            <div class="md:col-span-8 grid grid-cols-2 md:grid-cols-3 gap-8">
                <div>
                    <h4 class="text-dark font-bold mb-6 tracking-widest uppercase text-xs">Navegación</h4>
                    <ul class="space-y-3 text-sm text-gray-500 font-light">
                        <li><a href="#" class="hover:text-gold transition-colors">Inicio</a></li>
                        <li><a href="#catalogo" class="hover:text-gold transition-colors">Catálogo</a></li>
                        <li><a href="#marcas" class="hover:text-gold transition-colors">Marcas</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-dark font-bold mb-6 tracking-widest uppercase text-xs">Soporte</h4>
                    <ul class="space-y-3 text-sm text-gray-500 font-light">
                        <li><a href="#" class="hover:text-gold transition-colors">Envíos</a></li>
                        <li><a href="#" class="hover:text-gold transition-colors">Facturación</a></li>
                        <li><a href="#" class="hover:text-gold transition-colors">Contacto</a></li>
                    </ul>
                </div>
                <div class="col-span-2 md:col-span-1">
                    <h4 class="text-dark font-bold mb-6 tracking-widest uppercase text-xs">Contacto</h4>
                    <ul class="space-y-3 text-sm text-gray-500 font-light">
                        <li class="flex items-start gap-3"><i class="fa-solid fa-location-dot text-gold mt-1"></i> CDMX, México</li>
                        <li class="flex items-center gap-3"><i class="fa-solid fa-envelope text-gold"></i> contacto@medbeauty.com</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="border-t border-gray-100 pt-8 text-center text-xs text-gray-400 font-light">
            <p>&copy; 2025 Med & Beauty. Todos los derechos reservados.</p>
        </div>
    </div>
</footer>

<!-- Chat Button -->
<div class="fixed bottom-8 right-8 z-40">
    <button id="chat-toggle" class="bg-dark text-white w-14 h-14 rounded-full shadow-2xl hover:bg-gold transition-colors flex items-center justify-center text-xl">
        <i class="fa-solid fa-comment-dots"></i>
    </button>
</div>

<!-- Script Logic (Product Fetching & Marquee) -->
<script>
    let PRODUCTS = [];

    const BRAND_LOGOS = [
        "https://s3-eu-west-1.amazonaws.com/tpd/logos/5f69ef1790dce900016b4c7f/0x0.png",
        "https://belotero.co.nz/wp-content/themes/belotero/assets/img/Belotero%20HAF.png",
        "https://cdn.cookielaw.org/logos/9eb64978-23c0-4924-97a4-03eb6aab1106/a6465f03-5c73-498e-b290-d8543cc0efa1/117bd58d-3e9d-4020-817c-f97ad8ff7b49/Restylane.png",
        "https://www.sweye.com/wp-content/uploads/2019/05/gem20170813juvederm-5.png",
        "https://radiesse.com/app/uploads/2021/10/radiesse-injectables-logo-dark-teal@3x.png",
        "https://cosmetic-skin-care.co.uk/wp-content/uploads/2023/08/teoxane-logo.png",
    ];

    window.addEventListener('load', () => {
        const loader = document.getElementById('preloader');
        if(loader) {
            loader.style.opacity = '0';
            setTimeout(() => loader.remove(), 700);
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
        renderBrands();
        fetchProducts();
        setupHeroSearch();
    });

    function renderBrands() {
        const track = document.getElementById('brands-track');
        if(!track) return;
        const list = [...BRAND_LOGOS, ...BRAND_LOGOS, ...BRAND_LOGOS, ...BRAND_LOGOS];
        track.innerHTML = list.map(src => `
            <div class="flex-shrink-0 w-32 h-16 flex items-center justify-center opacity-40 hover:opacity-100 grayscale hover:grayscale-0 transition-all duration-500">
                <img src="${src}" class="max-w-full max-h-full object-contain">
            </div>
        `).join('');
        track.style.animation = 'scroll 30s linear infinite';
    }

    async function fetchProducts() {
        try {
            const apiUrl = window.MB_CONFIG?.API_ENDPOINT;
            if (!apiUrl) {
                console.error('API_ENDPOINT no configurado');
                return;
            }
            const res = await fetch(`${apiUrl}/products`);
            PRODUCTS = await res.json();
            
            populateFilters(PRODUCTS);
            renderProducts(PRODUCTS);
            setupFilters(PRODUCTS);
        } catch (error) {
            console.error('Error cargando productos:', error);
            document.getElementById('product-grid').innerHTML = '<p class="col-span-full text-center py-10 text-gray-400">Error cargando productos</p>';
        }
    }

    function setupHeroSearch() {
        const heroInput = document.querySelector('input[placeholder*="buscando"]');
        const heroBtn = heroInput?.nextElementSibling;
        
        const doSearch = () => {
            const term = heroInput.value.toLowerCase().trim();
            if(term) {
                document.getElementById('catalogo').scrollIntoView({ behavior: 'smooth' });
                const filtered = PRODUCTS.filter(p => 
                    p.name.toLowerCase().includes(term) || 
                    p.brand.toLowerCase().includes(term)
                );
                renderProducts(filtered);
            }
        };
        
        if(heroBtn) heroBtn.addEventListener('click', doSearch);
        if(heroInput) heroInput.addEventListener('keyup', (e) => { if(e.key === 'Enter') doSearch(); });
    }

    function populateFilters(products) {
        const select = document.getElementById('brand-filter');
        if(!select) return;
        const brands = [...new Set(products.map(p => p.brand))].sort();
        brands.forEach(b => {
            const opt = document.createElement('option');
            opt.value = b;
            opt.textContent = b;
            select.appendChild(opt);
        });
    }

    function renderProducts(products) {
        const grid = document.getElementById('product-grid');
        if(!grid) return;

        if(products.length === 0) {
            grid.innerHTML = '<p class="col-span-full text-center py-10 text-gray-400 font-light italic">No se encontraron productos.</p>';
            return;
        }

        grid.innerHTML = products.map(p => {
            const price = p.price ? new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(p.price) : '';
            const hasStock = p.stock !== 0;
            const imgUrl = p.image_url || '/products/medAndBeautyLogo.png';

            return `
                <div class="group relative bg-white flex flex-col hover:shadow-xl transition-all duration-300 p-4 rounded-sm border border-transparent hover:border-gray-50">
                    <div class="relative h-64 overflow-hidden bg-white mb-4 flex items-center justify-center">
                        <img src="${imgUrl}"
                             alt="${p.name}"
                             class="max-h-full max-w-full object-contain transform group-hover:scale-105 transition-transform duration-700 p-4"
                             onerror="this.src='/products/medAndBeautyLogo.png'">
                        ${!hasStock ? '<div class="absolute inset-0 bg-white/60 flex items-center justify-center"><span class="bg-dark text-white text-[10px] px-3 py-1 uppercase tracking-widest font-bold">Agotado</span></div>' : ''}
                    </div>
                    <div class="text-center mt-2">
                        <span class="text-[10px] text-gray-400 uppercase tracking-[0.2em] mb-1 block">${p.brand}</span>
                        <h3 class="font-serif text-lg text-dark leading-tight group-hover:text-gold transition-colors cursor-pointer">${p.name}</h3>
                        ${p.volume ? `<p class="text-xs text-gray-400 mt-1">${p.volume}</p>` : ''}
                        ${price ? `<div class="mt-3"><span class="text-gold font-medium text-sm">${price}</span></div>` : ''}
                    </div>
                </div>`;
        }).join('');
    }

    function setupFilters(allProducts) {
        const brandSelect = document.getElementById('brand-filter');
        const sortSelect = document.getElementById('sort-by');

        const apply = () => {
            let filtered = [...allProducts];

            if(brandSelect && brandSelect.value !== 'todos') {
                filtered = filtered.filter(p => p.brand === brandSelect.value);
            }

            if(sortSelect) {
                const sort = sortSelect.value;
                if(sort === 'precio_asc') filtered.sort((a,b) => (a.price||0) - (b.price||0));
                if(sort === 'precio_desc') filtered.sort((a,b) => (b.price||0) - (a.price||0));
            }

            renderProducts(filtered);
        };

        if(brandSelect) brandSelect.addEventListener('change', apply);
        if(sortSelect) sortSelect.addEventListener('change', apply);
    }
</script>
</body>
</html>